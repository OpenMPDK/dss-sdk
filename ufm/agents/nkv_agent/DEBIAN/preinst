#!/usr/bin/env bash
#
#
echo "Now running pre-installer!"

die()
{
    echo "Pre-install failed"
    echo "$*"
    exit 1
}

if [[ ! -x /usr/bin/python ]]
then
    echo "ERR: Python is not installed"
    exit 1
fi

python -m pip install --upgrade pip

# pip psutil install does not work on python2.7 on Centos
# yum install python-psutil

[[ -e /usr/share/nkvagent/requirements.txt ]] || die "ERR: Filed to find requirements.txt"
/usr/bin/env python -m pip install -r /usr/share/nkvagent/requirements.txt

exit 0

