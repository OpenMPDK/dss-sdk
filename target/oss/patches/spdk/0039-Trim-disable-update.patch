From 8beeb539e68bbc71c4dff7fbc110af5b659886b3 Mon Sep 17 00:00:00 2001
From: Benixon Arul dhas <benixon.a@samsung.com>
Date: Tue, 23 Mar 2021 14:24:03 -0700
Subject: [PATCH 39/44] Trim disable update

---
 lib/blob/blobstore.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/lib/blob/blobstore.c b/lib/blob/blobstore.c
index 6141eb32b..5af1561ad 100644
--- a/lib/blob/blobstore.c
+++ b/lib/blob/blobstore.c
@@ -1544,6 +1544,9 @@ bs_batch_clear_dev(struct spdk_blob_persist_ctx *ctx, spdk_bs_batch_t *batch, ui
 {
 	switch (ctx->blob->clear_method) {
 	case BLOB_CLEAR_WITH_DEFAULT:
+		if(g_bs_trim_enable == false) {
+			break;
+		}
 	case BLOB_CLEAR_WITH_UNMAP:
 		bs_batch_unmap_dev(batch, lba, lba_count);
 		break;
-- 
2.24.3

