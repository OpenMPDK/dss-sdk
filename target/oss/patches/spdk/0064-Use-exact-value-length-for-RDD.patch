From cdf9355521289ad119954a0b70a4c11bf8eafd96 Mon Sep 17 00:00:00 2001
From: Benixon Arul dhas <benixon.a@samsung.com>
Date: Mon, 20 Jun 2022 14:44:49 -0700
Subject: [PATCH 64/71] Use exact value length for RDD

    * makes sure the rdma does not access extra memory
---
 lib/nvmf/rdma.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/lib/nvmf/rdma.c b/lib/nvmf/rdma.c
index b273bc1a4..c5a2d3405 100644
--- a/lib/nvmf/rdma.c
+++ b/lib/nvmf/rdma.c
@@ -2442,7 +2442,7 @@ rdd_req:
 		//TODO: Validate command is only Get
 
 
-        length = (req->cmd->nvme_cmd.cdw10 << 2);//Get from val length field
+        length = rdma_req->req.dreq->req_value.length;
 
         DFLY_DEBUGLOG(DSS_RDD, "RDMA Data Direct request %p raddr:%p rkey %x len %d client handle %x\n",
                                             req->dreq, sgl->address, sgl->keyed.key, length,
-- 
2.24.3

